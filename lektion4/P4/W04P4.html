<!DOCTYPE html>
<html>
    <body>
    <h1>Computer graphics lektion 5</h1>
    <canvas id="c" height="700" width="700"></canvas>
    <script type="text/javascript" src="W04P4.js"></script>
    <script type="text/javascript" src="../../common/webgl-utils.js"></script>
    <script type="text/javascript" src="../../common/initShaders.js"></script>
    <script id="vertex-shader" type="x-shader/x-vertex">
        uniform mat4 u_model;
        uniform mat4 u_view;
        uniform mat4 u_projection;
        uniform vec4 u_lightPosition;
        uniform vec3 u_lightEmission;
        attribute vec3 aPosition;
        varying vec4 vColor;
        void main(){
            vec4 normal = vec4(aPosition, 0.0);
            vec3 pos = (u_model * vec4(aPosition, 1.0)).xyz;
            vec3 light = (u_view * u_lightPosition).xyz;
            vec3 w_i = u_lightPosition.w == 0.0 ? normalize(light) : normalize(light - pos);

            float theta = dot(normal, vec4(w_i, u_lightPosition.w));
            vec3 objectColor = vec3(0.5, 0.5, 0.5);
            
            vColor = vec4(objectColor * u_lightEmission, 1.0) * max(cos(theta), 0.0) + vec4(u_lightEmission * vec3(0.2, 0.2, 0.2), 1.0);
            gl_Position = u_projection * u_view * u_model * vec4(aPosition, 1.0);
            gl_PointSize = 20.0;
        }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        varying vec4 vColor;
        void main(){
            gl_FragColor = vColor;
        }
    </script>
    <script type="text/javascript" src="../../common/MV.js"></script>
    <div class="slidecontainer">
        <label for="radiance">Emitted radiance (L_e)</label>
        <input type="range" id="radiance" name="radiance"
         min="0.0" max="2.0" step="0.01" oninput="this.nextElementSibling.value = this.value">
         <output>1.0</output>

         <br>

        <label for="ambient">Ambient coefficient (k_a)</label>
        <input type="range" id="ambient" name="ambient"
         min="0.0" max="1.0" step="0.01" oninput="this.nextElementSibling.value = this.value">
         <output>0.5</output>

        <br>

        <label for="diffuse">Diffuse coefficient (k_d)</label>
        <input type="range" id="diffuse" name="diffuse"
         min="0.0" max="1.0" step="0.01" oninput="this.nextElementSibling.value = this.value">
         <output>0.5</output>

         <br>

        <label for="specular">Specular coefficient (k_s)</label>
        <input type="range" id="specular" name="specular"
         min="0.0" max="1.0" step="0.01" oninput="this.nextElementSibling.value = this.value">
         <output>0.5</output>

         <br>

        <label for="shininess">Shininess (s)</label>
        <input type="range" id="shininess" name="shininess"
         min="0.0" max="10000" step="100" oninput="this.nextElementSibling.value = this.value">
         <output>5000</output>
    </div>
    <br>
    <button id="subdivide_btn">Subdivide</button>
    <button id="coarsen_btn">Coarsen</button>
    <button id="orbit_btn">Orbit on/off</button>
    </body>
</html>